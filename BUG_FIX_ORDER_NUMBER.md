# ๐ ุฅุตูุงุญ ูุดููุฉ Nยฐ Order ูู ุงูุชุญููู ูู Devis ุฅูู Facture

**ุงูุชุงุฑูุฎ:** 17 ููููุจุฑ 2025  
**ุงูุญุงูุฉ:** โ ุชู ุงูุฅุตูุงุญ  
**ุงูุฃููููุฉ:** ุนุงููุฉ

---

## ๐ ูุตู ุงููุดููุฉ

ุนูุฏ ุชุญููู ูู **Devis** ุฅูู **Facture** ูู ุดุฑูุฉ MRY:
- ุงููุณุชุฎุฏู ูุฏุฎู ุฑูู Order ูุซู `51`
- ููู ุนูุฏ ุงูุญูุธุ ูุชู ุญูุธู ูู `51/2025` ุจุฏูุงู ูู `51`
- ูุฐุง ูุณุจุจ ูุดููุฉ ูุฃู Nยฐ Order ูุฌุจ ุฃู ูููู ุฑููุงู ุจุณูุทุงู ููุท

---

## ๐ ุงูุณุจุจ ุงูุฌุฐุฑู

ูู ุฏุงูุฉ `showConvertInputModal()` ูู ูููุงุช:
- `invoices_list_mry.js`
- `invoices_list_generic.js`

ุงูููุฏ ูุงู ูุถูู ุงูุณูุฉ ุชููุงุฆูุงู ููู ุงูุญููู:

```javascript
// โ ุงูููุฏ ุงูุฎุงุทุฆ
if (val2 && !val2.includes('/')) {
    val2 = val2 + '/' + currentYear;  // ุฅุถุงูุฉ /2025 ุฅูู Nยฐ Order
}
```

---

## โ ุงูุญู ุงููุทุจู

ุชู ุชุนุฏูู ุงูููุฏ ูุฅุถุงูุฉ ุงูุณูุฉ ููุท ูู **Nยฐ Facture** ูููุณ ูู **Nยฐ Order**:

```javascript
// โ ุงูููุฏ ุงูุตุญูุญ
// Auto-add year if not present (ONLY for document number, not for Nยฐ Order)
const currentYear = new Date().getFullYear();
if (val1 && !val1.includes('/')) {
    val1 = val1 + '/' + currentYear;  // ุฅุถุงูุฉ ุงูุณูุฉ ูู Nยฐ Facture
}
// Nยฐ Order should NOT have year added - keep it as simple number
// val2 remains unchanged  // ุนุฏู ุฅุถุงูุฉ ุงูุณูุฉ ูู Nยฐ Order
```

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### 1. `invoices_list_mry.js`
- **ุงูุณุทูุฑ:** 1745-1771
- **ุงูุฏุงูุฉ:** `handleConfirm()` ุฏุงุฎู `showConvertInputModal()`
- **ุงูุชุบููุฑ:** ุฅุฒุงูุฉ ุฅุถุงูุฉ ุงูุณูุฉ ูู `val2` (Nยฐ Order)

### 2. `invoices_list_generic.js`
- **ุงูุณุทูุฑ:** 1777-1803
- **ุงูุฏุงูุฉ:** `handleConfirm()` ุฏุงุฎู `showConvertInputModal()`
- **ุงูุชุบููุฑ:** ุฅุฒุงูุฉ ุฅุถุงูุฉ ุงูุณูุฉ ูู `val2` (Nยฐ Order)

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ูุจู ุงูุฅุตูุงุญ:
```
ุงููุฏุฎู: Nยฐ Order = 51
ุงููุชูุฌุฉ: 51/2025 โ
```

### ุจุนุฏ ุงูุฅุตูุงุญ:
```
ุงููุฏุฎู: Nยฐ Order = 51
ุงููุชูุฌุฉ: 51 โ
```

---

## ๐ ุงูุชุฃุซูุฑ

- โ Nยฐ Order ูุชู ุญูุธู ุจุดูู ุตุญูุญ ุจุฏูู ุณูุฉ
- โ Nยฐ Facture ูุชู ุญูุธู ุจุดูู ุตุญูุญ ูุน ุงูุณูุฉ
- โ ูุง ุชูุฌุฏ ูุดุงูู ูู ุงูุจุญุซ ูุงูุชุตููุฉ
- โ ูุง ุชูุฌุฏ ูุดุงูู ูู ุงูุชูุงุฑูุฑ

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ ุงูุฅุถุงููุฉ

### 3. `invoices_list_chaimae.js`
- **ุงูุณุทูุฑ:** 2634-2642
- **ุงูุฏุงูุฉ:** `handleConfirm()` ุฏุงุฎู `showConvertInputModalChaimae()`
- **ุงูุชุบููุฑ:** ุฅุฒุงูุฉ ุฅุถุงูุฉ ุงูุณูุฉ ุชููุงุฆูุงู ูู `val3` (Bon de livraison)
- **ุงูุณุจุจ:** Bon de livraison ูุฌุจ ุฃู ูุชู ุฅุฏุฎุงูู ููุง ูู ูู ุงููุณุชุฎุฏู ุจุฏูู ุฅุถุงูุฉ ุณูุฉ ุชููุงุฆูุฉ

### ุงููููุงุช ุงูุชู ูุง ุชุญุชุงุฌ ุฅุตูุงุญ
- โ `edit_invoice_multi.js` - ูุง ุชุญุชูู ุนูู ููุณ ุงููุดููุฉ
- โ `invoices_list_multi.js` - ูุง ุชุญุชูู ุนูู ููุณ ุงููุดููุฉ

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

### ุงูุณููู ุงูุตุญูุญ:
- **Nยฐ Facture:** ูุฌุจ ุฃู ูุญุชูู ุนูู ุงูุณูุฉ (ูุซู: `01/2025`)
- **Nยฐ Order:** ูุฌุจ ุฃู ูููู ุฑููุงู ุจุณูุทุงู ููุท (ูุซู: `51`)
- **Nยฐ Devis:** ูุฌุจ ุฃู ูุญุชูู ุนูู ุงูุณูุฉ (ูุซู: `01/2025`)

### ุงูุญููู ุงูุฃุฎุฑู:
- **Bon de livraison:** ูุชู ุฅุฏุฎุงูู ููุง ูู ูู ุงููุณุชุฎุฏู (ูุซู: `123` ุฃู `MG123/2025`)
- **Bon de commande:** ุฑูู ุจุณูุท (ูุซู: `456`)
- **Nยฐ Order (ูู Bon de livraison):** ูุชู ุฅุฏุฎุงูู ููุง ูู ูู ุงููุณุชุฎุฏู (ูุซู: `456`)

---

## โจ ุงูุฎูุงุตุฉ

ุชู ุฅุตูุงุญ ุงููุดููุฉ ุจูุฌุงุญ ูู ุฌููุน ุงูุดุฑูุงุช:

### MRY ู Generic:
- ูุชู ุญูุธ Nยฐ Facture ุจุดูู ุตุญูุญ ูุน ุงูุณูุฉ
- ูุชู ุญูุธ Nยฐ Order ุจุดูู ุตุญูุญ ุจุฏูู ุงูุณูุฉ

### CHAIMAE:
- ูุชู ุญูุธ Nยฐ Facture ุจุดูู ุตุญูุญ ูุน ุงูุณูุฉ
- ูุชู ุญูุธ Nยฐ Order ุจุดูู ุตุญูุญ ุจุฏูู ุงูุณูุฉ
- ูุชู ุญูุธ Bon de livraison ููุง ูู ูุฏุฎู ูู ุงููุณุชุฎุฏู ุจุฏูู ุฅุถุงูุฉ ุณูุฉ ุชููุงุฆูุฉ

---

**ุชู ุงูุฅุตูุงุญ ุจูุงุณุทุฉ:** Cascade AI  
**ุงูุชุงุฑูุฎ:** 17 ููููุจุฑ 2025
