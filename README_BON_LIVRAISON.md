# ๐ฆ Bon de Livraison PDF Handler - README

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก **ููู ูููุตู ูุชุฎุตุต** ูุชุญููู PDF ุฎุงุต ุจู **"Bon de livraison"** ููุท ูุดุฑูุฉ CHAIMAE.

ูุฐุง ุงูููู ูููุฑ:
- โ ููุฏ ูุธูู ููุงุจู ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
- โ ุชุตููู ุงุญุชุฑุงูู ูุญุฏูุซ
- โ ููุงูุฐ ุชูุงุนููุฉ ุฌูููุฉ
- โ ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก
- โ ุณูู ุงูุชุฎุตูุต ูุงูุชุนุฏูู

---

## ๐ ุงููููุงุช ุงูููุดุฃุฉ

| ุงูููู | ุงููุตู |
|------|-------|
| `bon_livraison_pdf_handler.js` | ุงูููู ุงูุฑุฆูุณู (~15 KB) |
| `BON_LIVRAISON_PDF_GUIDE.md` | ุฏููู ุดุงูู ุจุตูุบุฉ Markdown |
| `BON_LIVRAISON_INTEGRATION_EXAMPLE.html` | ุตูุญุฉ ุชูุถูุญูุฉ ุจุชุตููู ุงุญุชุฑุงูู |
| `BON_LIVRAISON_SUMMARY.txt` | ููุฎุต ุดุงูู ุจุตูุบุฉ ูุตูุฉ |
| `HOW_TO_ADD_BUTTON.md` | ุดุฑุญ ููุตู ูุฅุถุงูุฉ ุงูุฒุฑ |
| `README_BON_LIVRAISON.md` | ูุฐุง ุงูููู |

---

## ๐ ุงูุจุฏุก ุงูุณุฑูุน

### ุงูุฎุทูุฉ 1: ุฅุถุงูุฉ ุงูููู ุฅูู HTML

```html
<!-- ูู index.html -->
<script src="frontend/pages/bon_livraison_pdf_handler.js"></script>
```

### ุงูุฎุทูุฉ 2: ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ

```javascript
// ุชุญููู PDF ูู Bon de Livraison
downloadBonLivraisonPDF(invoiceId);
```

### ุงูุฎุทูุฉ 3: ุฅุถุงูุฉ ุฒุฑ ูู ุงูุฌุฏูู

```html
<button onclick="downloadBonLivraisonPDF(${invoice.id})">
    ๐ฅ ุชุญููู Bon de Livraison
</button>
```

---

## โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1๏ธโฃ ุชุญูู ุชููุงุฆู ูู ููุน ุงููุณุชูุฏ
- ูุชุญูู ุฃู ุงูููุน ูู `bon_livraison` ุฃู `bl` ููุท
- ูุฑูุน ุฎุทุฃ ุฅุฐุง ูุงู ููุน ุขุฎุฑ

### 2๏ธโฃ ูุงูุฐุฉ ุงุฎุชูุงุฑ ุฑูู ุงูุฃูุฑ
- ุชุธูุฑ ููุท ุฅุฐุง ูุงู ููุงู `document_numero_commande`
- ุชุตููู ุงุญุชุฑุงูู ูุน ููู ุจุฑุชูุงูู
- ุฎูุงุฑ ูุฅุถุงูุฉ ุฃู ุนุฏู ุฅุถุงูุฉ ุงูุฑูู ูู PDF

### 3๏ธโฃ ูุงูุฐุฉ ุงูููุชุฌุงุช ุจููู ุตูุฑูุฉ
- ุชุธูุฑ ุฅุฐุง ูุงู ููุงู ููุชุฌุงุช ุจู ูููุฉ = 0 ุฃู ุณุนุฑ = 0
- ุฎูุงุฑ ูุฅุธูุงุฑ ุฃู ุฅุฎูุงุก ูุฐู ุงูููุชุฌุงุช

### 4๏ธโฃ PDF ุงุญุชุฑุงูู
- ุฑุฃุณ ูุญุชูู ุนูู ูุนูููุงุช ุงูุดุฑูุฉ ูุงูุนููู
- ุฌุฏูู ููุธู ูุน ุชูููู ุงูุตููู
- ููุฎุต ูุงูู (Total HT, TVA, Total TTC)
- ุชุฐููู ูุน ูุนูููุงุช ุงูุงุชุตุงู
- ุชุฑููู ุงูุตูุญุงุช ุงูุชููุงุฆู

### 5๏ธโฃ ุฏุนู ุงูุตูุญุงุช ุงููุชุนุฏุฏุฉ
- ุชูุณูู ุงูููุชุฌุงุช ุงูุทูููุฉ ุนุจุฑ ุตูุญุงุช
- ุฅุนุงุฏุฉ ุฑุฃุณ ุงูุตูุญุฉ ูู ูู ุตูุญุฉ ุฌุฏูุฏุฉ
- ุชุฑููู ุตุญูุญ ููุตูุญุงุช

---

## ๐จ ุงูุชุตููู ูุงูุฃููุงู

### ุงูุฃููุงู ุงููุณุชุฎุฏูุฉ

```
ุงูุฑุฃุณ ูุงูุนูุงููู:        ุฃุฒุฑู (#21618C)
ุงูุฃุฑูุงู ูุงูุนููุงุก:      ุฃุฎุถุฑ (#4caf50)
ุฃุฑูุงู ุงููุซุงุฆู ูุงูุฃูุงูุฑ: ุจุฑุชูุงูู (#FF9800)
ุฎูููุฉ ุงูุตููู:          ุฑูุงุฏู ูุงุชุญ (#F5F5F5)
```

### ุงูููุงูุฐ ุงูุชูุงุนููุฉ

- ุชุตููู ุญุฏูุซ ูุน ุชุฏุฑุฌุงุช ููููุฉ
- ุฑููุฒ ุชุนุจูุฑูุฉ ูููุถูุญ
- ุฃุฒุฑุงุฑ ูุน ุชุฃุซูุฑุงุช ุนูุฏ ุงูุชูุฑูุฑ
- ุฑุณุงุฆู ูุงุถุญุฉ ูููุฌูุฉ ูููุณุชุฎุฏู

---

## ๐ ุงูุฏูุงู ุงูุฑุฆูุณูุฉ

### `downloadBonLivraisonPDF(invoiceId)`
ุงูุฏุงูุฉ ุงูุฑุฆูุณูุฉ ูุชุญููู PDF
```javascript
downloadBonLivraisonPDF(123);
```

### `showBonLivraisonModal(orderNumber)`
ูุงูุฐุฉ ุงุฎุชูุงุฑ ุฑูู ุงูุฃูุฑ
```javascript
const include = await showBonLivraisonModal('BC123/2025');
```

### `showZeroProductsModal()`
ูุงูุฐุฉ ุงูููุชุฌุงุช ุจููู ุตูุฑูุฉ
```javascript
const include = await showZeroProductsModal();
```

### `addBonLivraisonHeader(doc, invoice, colors, dateStr)`
ุฅุถุงูุฉ ุฑุฃุณ ุงูุตูุญุฉ

### `addBonLivraisonTable(doc, invoice, colors, includeZeroProducts)`
ุฅุถุงูุฉ ุฌุฏูู ุงูููุชุฌุงุช

### `addBonLivraisonFooter(doc, colors, pageNum, totalPages)`
ุฅุถุงูุฉ ุชุฐููู ุงูุตูุญุฉ

---

## ๐ง ุงูุชุฎุตูุต

### ุชุบููุฑ ูุนูููุงุช ุงูุดุฑูุฉ

ูู ุฏุงูุฉ `addBonLivraisonHeader`:

```javascript
doc.text('CHAIMAE ERRBAHI MDIQ sarl (AU)', 105, 20, { align: 'center' });
doc.text('Patente Nยฐ 52003366 - NIF : 40190505', 105, 27, { align: 'center' });
```

### ุชุบููุฑ ุงูุฃููุงู

ูู ุฏุงูุฉ `downloadBonLivraisonPDF`:

```javascript
const colors = {
    blue: [33, 97, 140],      // ููู ุงูุฑุฃุณ
    green: [76, 175, 80],     // ููู ุงูุฃุฑูุงู
    orange: [255, 152, 0],    // ููู ุฃุฑูุงู ุงููุซุงุฆู
    lightGray: [245, 245, 245],
    darkGray: [96, 125, 139]
};
```

### ุชุบููุฑ ูุนูููุงุช ุงูุชุฐููู

ูู ุฏุงูุฉ `addBonLivraisonFooter`:

```javascript
doc.text('RIB : 007 720 00 05979000000368 12  ATTIJARI WAFA BANQ', 15, 275);
doc.text('Email: errbahiabderrahim@gmail.com', 15, 279);
```

---

## ๐ ุฃูุซูุฉ ุนูููุฉ

### ูุซุงู 1: ุฒุฑ ุจุณูุท

```html
<button onclick="downloadBonLivraisonPDF(${invoice.id})">
    ๐ฅ ุชุญููู
</button>
```

### ูุซุงู 2: ุฒุฑ ูุน ุชุตููู ูุชูุฏู

```html
<button 
    onclick="downloadBonLivraisonPDF(${invoice.id})"
    style="
        padding: 0.5rem 1rem;
        background: linear-gradient(135deg, #FF9800 0%, #FB8C00 100%);
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
    ">
    ๐ฅ Bon de Livraison
</button>
```

### ูุซุงู 3: ุฒุฑ ูุดุฑูุท (ููุท ููู Bon de Livraison)

```javascript
if (invoice.document_type === 'bon_livraison' || invoice.document_type === 'bl') {
    const btn = `<button onclick="downloadBonLivraisonPDF(${invoice.id})">
        ๐ฅ Bon de Livraison
    </button>`;
}
```

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### 1. ุงูุชุญูู ูู ุงูููุน
ุงูุฏุงูุฉ ุชุชุญูู ุชููุงุฆูุงู ูู ุฃู ุงูููุน ูู `bon_livraison` ุฃู `bl`

### 2. ููุชุจุฉ jsPDF
ุชูุญููู ุชููุงุฆูุงู ูู CDN ุฅุฐุง ูู ุชูู ููุฌูุฏุฉ

### 3. ุงูุฅุดุนุงุฑุงุช
ุชุณุชุฎุฏู `window.notify` ูููุฌุงุญ ูุงูุฃุฎุทุงุก

### 4. ูุงุนุฏุฉ ุงูุจูุงูุงุช
ุชุณุชุฎุฏู `window.electron.dbChaimae` ูููุตูู ุฅูู ุงูุจูุงูุงุช

### 5. ุงูุตูุญุงุช ุงููุชุนุฏุฏุฉ
ุงูููู ูุฏุนู ุงูุตูุญุงุช ุงููุชุนุฏุฏุฉ ุชููุงุฆูุงู

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ูุธูุฑ ุดูุก

**ุงูุญู:**
- ุชุฃูุฏ ูู ุชุญููู ุงูููู ูู `index.html`
- ุชุฃูุฏ ูู ุฃู `invoiceId` ุตุญูุญ
- ุชุฃูุฏ ูู ุฃู ุงูุจูุงูุงุช ููุฌูุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุงูุชุญ console ููุชุญูู ูู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุฎุทุฃ ูู jsPDF

**ุงูุญู:**
- ุชุฃูุฏ ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช (ูุชุญููู CDN)
- ุฃู ูู ุจุชุญููู jsPDF ูุญููุงู

### ุงููุดููุฉ: ุงูุฅุดุนุงุฑุงุช ูุง ุชุธูุฑ

**ุงูุญู:**
- ุชุฃูุฏ ูู ูุฌูุฏ `window.notify` ูู ุงูุชุทุจูู
- ุชุญูู ูู ูุธุงู ุงูุฅุดุนุงุฑุงุช

### ุงููุดููุฉ: ุงูุจูุงูุงุช ูุง ุชุธูุฑ ูู PDF

**ุงูุญู:**
- ุชุฃูุฏ ูู ุฃู ุงูุจูุงูุงุช ููุฌูุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุชุญูู ูู console ููุฃุฎุทุงุก
- ุชุฃูุฏ ูู ุฃู ุงููุงุชูุฑุฉ ูู ููุน `bon_livraison`

---

## ๐ ุงููููุงุช ุฐุงุช ุงูุตูุฉ

- `invoices_list_chaimae.js` - ูุงุฆูุฉ ุงูููุงุชูุฑ ุงูุฑุฆูุณูุฉ
- `index.html` - ุงูููู ุงูุฑุฆูุณู ููุชุทุจูู
- `frontend/scripts/notifications.js` - ูุธุงู ุงูุฅุดุนุงุฑุงุช
- `database/db_chaimae.js` - ูุงุนุฏุฉ ุจูุงูุงุช CHAIMAE
- `database/ipc-handlers-chaimae.js` - ูุนุงูุฌุงุช IPC

---

## ๐ ุงููุซุงุฆู ุงูุฅุถุงููุฉ

- **BON_LIVRAISON_PDF_GUIDE.md** - ุฏููู ุดุงูู
- **BON_LIVRAISON_INTEGRATION_EXAMPLE.html** - ุตูุญุฉ ุชูุถูุญูุฉ
- **HOW_TO_ADD_BUTTON.md** - ุดุฑุญ ููุตู ูุฅุถุงูุฉ ุงูุฒุฑ
- **BON_LIVRAISON_SUMMARY.txt** - ููุฎุต ุดุงูู

---

## โ ูุงุฆูุฉ ุงูุชุญูู

ูุจู ุงูุงุณุชุฎุฏุงูุ ุชุฃูุฏ ูู:

- [ ] ุชู ุชุญููู ุงูููู ูู `index.html`
- [ ] ุงูููู ููุฌูุฏ ูู ุงููุณุงุฑ ุงูุตุญูุญ
- [ ] ุงูุฏุงูุฉ `downloadBonLivraisonPDF` ูุชุงุญุฉ
- [ ] `window.notify` ููุฌูุฏ ูู ุงูุชุทุจูู
- [ ] `window.electron.dbChaimae` ูุชุงุญ
- [ ] ุงูุจูุงูุงุช ููุฌูุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## ๐ ุงูุฎูุงุตุฉ

ูุฐุง ุงูููู ูููุฑ ุญูุงู ูุชูุงููุงู ูุชุญููู PDF ุฎุงุต ุจู "Bon de livraison" ูุน:

โ ููุฏ ูุธูู ููุงุจู ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
โ ุชุตููู ุงุญุชุฑุงูู ูุญุฏูุซ
โ ููุงูุฐ ุชูุงุนููุฉ ุฌูููุฉ
โ ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก
โ ุณูู ุงูุชุฎุตูุต ูุงูุชุนุฏูู
โ ุฏุนู ูุชุนุฏุฏ ุงูุตูุญุงุช
โ ุชุฑููู ุงูุตูุญุงุช ุงูุชููุงุฆู
โ ุชูุซูู ุดุงูู

---

## ๐ ุงูููุงุญุธุงุช ุงูููุงุฆูุฉ

- ุงูููู ูููุตู ููุงุจู ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู ูู ุฃู ููุงู
- ูุนูู ููุท ูุน CHAIMAE
- ูุชุญูู ุชููุงุฆูุงู ูู ููุน ุงููุณุชูุฏ
- ูุญููู jsPDF ูู CDN ุชููุงุฆูุงู
- ูุณุชุฎุฏู `window.notify` ููุฅุดุนุงุฑุงุช

---

**ุงุณุชูุชุน ุจุงุณุชุฎุฏุงู ุงูููู! ๐**
